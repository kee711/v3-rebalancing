# Aerodrome Rebalancing Vault Bot (Backtest + UI)

This repo contains a fully working backtest pipeline and dashboard for Aerodrome rebalancing strategies. It runs a deterministic backtest by default, stores results to `data/results.json`, and serves a frontend dashboard.

## Quick start

```bash
npm install
npm run dev
```

Then open `http://localhost:3000`.

## Run a backtest manually

```bash
npm run backtest
```

Results are written to `data/results.json`. The UI reads this file automatically.

## Configure

Edit `config/backtest.json` to change:

- `poolType`: `cl`, `volatile`, or `stable`
- `feesApr`, `emissionsApr`, `gasUsd`
- `lookbackDays`, `timeStepMinutes`
- `rebalanceParams` (thresholds and range width settings)

### CSV data input

Set `dataSource` to `csv` and place a CSV at `data/series.csv` with headers:

```
timestamp,price,feesApr,emissionsApr,liquidityUsd,gasUsd
```

Timestamps should be in milliseconds.

## Scripts

- `npm run dev` starts the API + UI and auto-runs the backtest if missing
- `npm run backtest` runs once and writes `data/results.json`
- `npm run build` compiles TypeScript to `dist/`
- `npm run start` serves the compiled server


---

ğŸ¯ ê¸°ë³¸ ê°œë…: "ê°€ê²© ë²”ìœ„ì— ëˆì„ ê±¸ê¸°"

 Aerodromeì€ Concentrated Liquidity (ì§‘ì¤‘ ìœ ë™ì„±) ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

 ì¼ë°˜ ë°©ì‹:  ëª¨ë“  ê°€ê²©ì— ëˆì„ ë¶„ì‚° â†’ íš¨ìœ¨ ë‚®ìŒ
 ì§‘ì¤‘ ë°©ì‹:  íŠ¹ì • ê°€ê²© ë²”ìœ„ì—ë§Œ ì§‘ì¤‘ â†’ íš¨ìœ¨ ë†’ìŒ (but ë²”ìœ„ ë²—ì–´ë‚˜ë©´ 0)

 ë¹„ìœ :
 ì¶•êµ¬ì¥ ì „ì²´ì— ê·¸ë¬¼ì„ ì¹˜ëŠ” ê²ƒ vs ê³¨ëŒ€ ì•ì—ë§Œ ê·¸ë¬¼ì„ ì¹˜ëŠ” ê²ƒ
 â†’ ê³¨ëŒ€ ì•ì´ ë” íš¨ìœ¨ì ì´ì§€ë§Œ, ê³µì´ ë‹¤ë¥¸ ë° ê°€ë©´ ëª» ì¡ìŒ

 ---
 ğŸ¤– ë´‡ì´ í•˜ëŠ” ì¼: "ë²”ìœ„ ìë™ ì¡°ì •"

 ê°€ê²©ì´ ì›€ì§ì´ë©´ ë²”ìœ„ë¥¼ ë”°ë¼ ì˜®ê²¨ì•¼ ê³„ì† ìˆ˜ìµì´ ë‚¨

 ì‹œê°„ â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’

 ê°€ê²©:     $3000 â”€â”€â†’ $3200 â”€â”€â†’ $2900
            â†“         â†“         â†“
 ë²”ìœ„:   [2800-3200] â†’ [3000-3400] â†’ [2700-3100]
            â†“         â†“         â†“
          ë¦¬ë°¸ëŸ°ì‹±!   ë¦¬ë°¸ëŸ°ì‹±!   ë¦¬ë°¸ëŸ°ì‹±!

 ---
 ğŸ“‹ 4ê°€ì§€ ì „ëµ
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚      ì „ëµ       â”‚               í•˜ëŠ” ì¼                â”‚                 ë¹„ìœ                  â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚ Range Around    â”‚ í‰ê·  ê°€ê²© ì£¼ë³€ì— ë²”ìœ„ ì„¤ì •           â”‚ "ì‚¬ëŒë“¤ì´ ë§ì´ ì§€ë‚˜ê°€ëŠ” ê¸¸ëª©ì— ê°€ê²Œ  â”‚
 â”‚ TWAP            â”‚                                      â”‚ ì—´ê¸°"                                â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚ Trend Skew      â”‚ ê°€ê²©ì´ ì˜¤ë¥´ë©´ ë²”ìœ„ë¥¼ ìœ„ë¡œ, ë‚´ë¦¬ë©´    â”‚ "ê³µì´ ê°€ëŠ” ë°©í–¥ìœ¼ë¡œ ë¯¸ë¦¬ ì›€ì§ì´ê¸°"   â”‚
 â”‚                 â”‚ ì•„ë˜ë¡œ                               â”‚                                      â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚ Inventory       â”‚ ETH:USDC ë¹„ìœ¨ì„ 50:50ìœ¼ë¡œ ìœ ì§€       â”‚ "í•œìª½ì— ë„ˆë¬´ ì¹˜ìš°ì¹˜ì§€ ì•Šê²Œ ê· í˜•      â”‚
 â”‚ Target          â”‚                                      â”‚ ë§ì¶”ê¸°"                              â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚ Reward Compound â”‚ AERO ë³´ìƒ ë°›ìœ¼ë©´ ì¬íˆ¬ì              â”‚ "ì´ì ë°›ìœ¼ë©´ ë‹¤ì‹œ ì˜ˆê¸ˆí•˜ê¸°"          â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 ---
 ğŸ”„ ë°±í…ŒìŠ¤íŠ¸ ê³¼ì •

 1. ê³¼ê±° 60ì¼ ë°ì´í„° ê°€ì ¸ì˜´ (The Graphì—ì„œ)
    â””â”€ ë§¤ ì‹œê°„ë§ˆë‹¤ ê°€ê²©, ìˆ˜ìˆ˜ë£Œ, TVL ë“±

 2. $10,000ìœ¼ë¡œ ì‹œì‘

 3. ë§¤ ì‹œê°„ë§ˆë‹¤:
    â”œâ”€ "ì§€ê¸ˆ ë²”ìœ„ ë°–ì¸ê°€?" â†’ ë¦¬ë°¸ëŸ°ì‹±!
    â”œâ”€ "ì¶”ì„¸ê°€ ë°”ë€Œì—ˆë‚˜?" â†’ ë²”ìœ„ ì´ë™!
    â”œâ”€ "ë³´ìƒì´ $50 ë„˜ì—ˆë‚˜?" â†’ ìˆ˜í™•!
    â””â”€ ìˆ˜ìˆ˜ë£Œ + ë³´ìƒ ì ë¦½

 4. 60ì¼ í›„ ê²°ê³¼ ê³„ì‚°

 ---
 ğŸ“Š ê²°ê³¼ í•´ì„

 60ì¼ ì „                        ì§€ê¸ˆ
 $10,000 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ $12,042

 ì–´ë–»ê²Œ?
 â”œâ”€ ìˆ˜ìˆ˜ë£Œ ìˆ˜ìµ:    +$234  (ê±°ë˜í•  ë•Œë§ˆë‹¤ ì¡°ê¸ˆì”©)
 â”œâ”€ AERO ë³´ìƒ:      +$301  (Aerodromeì´ ì£¼ëŠ” ë³´ë„ˆìŠ¤)
 â”œâ”€ ê°€ê²© ë³€ë™:      +$1,516 (ETH ê°€ê²© ì˜¬ë¼ì„œ)
 â””â”€ ê°€ìŠ¤ë¹„:         -$9    (ë¦¬ë°¸ëŸ°ì‹± ë¹„ìš©)
 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 ìˆœì´ìµ:            +$2,042

 ---
 âš ï¸ ì£¼ì˜í•  ì 

 âœ… ê³¼ê±°ì— ì´ë¬ë‹¤ëŠ” ê²ƒ
 âŒ ë¯¸ë˜ë„ ì´ëŸ´ ê±°ë¼ëŠ” ë³´ì¥ ì—†ìŒ

 âœ… ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼
 âŒ ì‹¤ì œ ìŠ¬ë¦¬í”¼ì§€, ì‹¤íŒ¨í•œ íŠ¸ëœì­ì…˜ ë“± ë¯¸ë°˜ì˜

 ---
 í•œ ì¤„ ìš”ì•½

 **"ê°€ê²©ì´ ì›€ì§ì¼ ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ë²”ìœ„ë¥¼ ì˜®ê²¨ì„œ ìˆ˜ìˆ˜ë£Œë¥¼ ìµœëŒ€í•œ ë°›ëŠ” ì „ëµ"**ì„
 **"ê³¼ê±° 60ì¼ ì‹¤ì œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸"**í•œ ê²°ê³¼ì…ë‹ˆë‹¤.
